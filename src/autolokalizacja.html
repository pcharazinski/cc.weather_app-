<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wyszukiwanie</title>

    <style type="text/css">
        #map {
            width: 800px;
            height: 400px;
            margin-top: 20px;
        }
    </style>
</head>

<body>

<button id="detect">Wykryj lokalizację</button>
<div id="map"></div>


<script src="https://maps.googleapis.com/maps/api/js" type="text/javascript"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script> 
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA1731XhstAAvLQ_44XmnpiiGHbt2TRDBQ&callback=initMap"
type="text/javascript"></script>

<script>
    $(document).ready(function() {
        var geo = navigator.geolocation;
        if (geo) {

            $('#detect').on('click', function() {

                geo.getCurrentPosition(function(location) {
                    // zapisanie szerokości i długości geograficznej do zmiennych
                    var lat = location.coords.latitude;
                    var lng = location.coords.longitude;

                    // opcje mapy
                    var mapOptions = {
                        // wielkość zoomu
                        zoom: 15,
                        // współrzędne punktu, na którym wyśrodkowana jest mapa
                        center: new google.maps.LatLng(lat, lng),
                    };

                    // pobranie mapy do zmiennej
                    var mapElement = document.getElementById('map');

                    // Utworzenie mapy Google używając elementu #map i opcji zdefiniowanych w tablicy
                    var map = new google.maps.Map(mapElement, mapOptions);

                    // dodanie znacznika
                    var marker = new google.maps.Marker({
                        position: new google.maps.LatLng(lat, lng),
                        map: map,
                          title: 'Mapa Devcorner'
                    });

                });

            });

        } else {
            console.log('niedostępny');
        }

    });

</script>
</body>

</html>
